{% extends 'tekir_base.html' %}

{% from 'tekir_macros.html' import render_field %}

{% block body %}
  <form id="tekir-content-edit" action="." method="POST">
    {% for field in record.datamodel.fields %}
      {{ render_field(record, field, prefix='') }}
    {% endfor %}

    <button id="save-content"
        hx-post="{{ url_for('tekir_admin.api.save_content', path=record.path) }}"
        hx-target="#save-result">
      {% include 'icons/document-save.svg' %} <span>{{ _('Save') }}</span>
    </button>
    <button id="check-changes"
        hx-post="{{ url_for('tekir_admin.api.check_changes', path=record.path) }}"
        hx-target="#changes-result">
      {% include 'icons/document-close.svg' %} <span>{{ _('Close') }}</span>
    </button>
  </form>

  <dialog id="save-dialog">
    <p id="save-result"></p>
    <button class="modal-close">{{ _('Close') }}</button>
  </dialog>

  <dialog id="changes-dialog">
    <p id="changes-result"></p>
    <button id="changes-continue">{{ _('Continue') }}</button>
    <button class="modal-close">{{ _('Cancel') }}</button>
  </dialog>

  <dialog id="navigate-dialog">
    <div class="field">
      <select id="navigables" name="path"
          hx-get="{{ url_for('tekir_admin.api.navigables') }}"></select>
    </div>
    <button id="navigate-select">{{ _('Select') }}</button>
    <button class="modal-close">{{ _('Cancel') }}</button>
  </dialog>
{% endblock %}
